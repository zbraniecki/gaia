!function(a,b){function c(a,b){c.modules[a]=b}function d(a){for(var b=a.split("/"),c=[],d=0;d<b.length;d++)"."==b[d]||(".."==b[d]?c.pop():c.push(b[d]));return c.join("/")}function e(a,b){return a?a.trim().replace(/\/*$/,"/")+b.trim():b.trim()}function f(a){return a?a.split("/").slice(0,-1).join("/"):null}function g(a,h){if(h=d(e(f(a),h)),h in c.exports)return c.exports[h];if(!(h in c.modules))throw new Error("Module not defined: "+h);var i=c.modules[h];if("function"==typeof i){var j={},k=i(g.bind(null,h),j,{id:h,uri:""});i=k!==b?k:j}return c.exports[h]=i}c.modules={},c.exports={};var h=g.bind(null,null);c("l20n/gaia",function(a){"use strict";function b(){var a=document.head,b=a.querySelector('script[type="application/l10n-data+json"]');b&&u.updateData(JSON.parse(b.textContent));var e=a.querySelectorAll('script[type="application/l20n"]');if(e.length){for(var g=0;g<e.length;g++)e[g].hasAttribute("src")?u.linkResource(e[g].getAttribute("src")):u.addResource(e[g].textContent);u.requestLocales()}else{var i=a.querySelector('meta[name="locales"]'),j=a.querySelector('meta[name="default_locale"]'),k=a.querySelector('meta[name="resources"]');if(i&&j&&k)f({locales:i.getAttribute("content").split(",").map(String.trim),default_locale:j.getAttribute("content"),resources:k.getAttribute("content").split("|").map(String.trim)});else{var l=a.querySelector('link[rel="localization"]');l?h(l.getAttribute("href")):console.warn("L20n: No resources found. (Put them above l20n.js.)")}}"loading"!==document.readyState?c():document.addEventListener("readystatechange",c),d()}function c(){var a=j(document.body);r=u.localize(a.ids,function(b){a||(a=j(document.body));for(var c=0;c<a.nodes.length;c++)l(a.nodes[c],a.ids[c],b.entities[a.ids[c]]);"locales"in b.reason&&b.reason.locales.length&&e(b.reason.locales[0]),a=null,y||(y=!0,i())}),document.removeEventListener("readystatechange",c)}function d(){u.addEventListener("error",console.error.bind(console)),u.addEventListener("warning",console.warn.bind(console)),u.localizeNode=function(a){for(var b=j(a),c=r.extend(b.ids),d=0;d<b.nodes.length;d++)l(b.nodes[d],b.ids[d],c.entities[b.ids[d]])},u.once=function(a){if(y)a();else{var b=function b(){document.removeEventListener("DocumentLocalized",b),a()};document.addEventListener("DocumentLocalized",b)}},document.l10n=u}function e(a){document.documentElement.lang=a,document.documentElement.dir=-1===v.indexOf(a)?"ltr":"rtl"}function f(b){u.registerLocales(b.default_locale,b.locales),u.registerLocaleNegotiator(function(b,c,d){var f=a("./intl").Intl,g=f.prioritizeLocales(b,c,d);return e(g[0]),g});var c=/{{\s*locale\s*}}/;return b.resources.forEach(function(a){c.test(a)?u.linkResource(a.replace.bind(a,c)):u.linkResource(a)}),navigator.mozSettings.addObserver("language.current",function(a){u.requestLocales(a.settingValue)}),u.requestLocales(navigator.language),b}function g(a,b){if(w.test(b))return b;var c=a.split("/").slice(0,-1).concat(b.split("/")).filter(function(a){return"."!==a});return c.join("/")}function h(a){t.load(a,function(b,c){var d=JSON.parse(c);d.resources=d.resources.map(g.bind(this,a)),f(d)})}function i(){var a=document.createEvent("Event");a.initEvent("DocumentLocalized",!1,!1),document.dispatchEvent(a)}function j(a){var b=a.querySelectorAll("[data-l10n-id]"),c=[];a.hasAttribute&&a.hasAttribute("data-l10n-id")&&(b=Array.prototype.slice.call(b),b.push(a));for(var d=0;d<b.length;d++)c.push(b[d].getAttribute("data-l10n-id"));return{ids:c,nodes:b}}function k(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}).replace(/^-/,"")}function l(a,b,c){if(c){if(c.value)if(-1===c.value.indexOf("<")&&-1===c.value.indexOf("&"))a.textContent=c.value;else{var d=document.createElement("template");d.innerHTML=c.value,m(a,d.content)}Object.keys(c.attributes).forEach(function(b){o({name:b},a)&&a.setAttribute(k(b),c.attributes[b])})}}function m(a,b){for(var c,d=new DocumentFragment;c=a.children[0];)n(c,b,d);if(n(null,b,d),a.textContent="",a.appendChild(d),b.attributes)for(var e,f=0;e=b.attributes[f];f++)o(e,a)&&a.setAttribute(e.name,e.value)}function n(a,b,c){var d;a&&(d=q(b,a,p(a)));for(var e;e=b.childNodes[0];){if(e===d)return m(a,b.removeChild(e)),c.insertBefore(a,null),void 0;if(e.tagName)if(-1!==x.elements.indexOf(e.tagName.toLowerCase())){c.insertBefore(b.removeChild(e),null);for(var f,g=0;f=e.attributes[g];g++)o(f,e)||e.removeAttribute(f.name)}else{b.removeChild(e);var h=new Text(e.textContent);c.insertBefore(h,null)}else c.insertBefore(b.removeChild(e),null)}a&&a.parentNode.removeChild(a)}function o(a,b){var c=a.name.toLowerCase(),d=b.tagName.toLowerCase();if(-1!==x.attributes.global.indexOf(c))return!0;if(!x.attributes[d])return!1;if(-1!==x.attributes[d].indexOf(c))return!0;if("input"===d&&"value"===c){var e=b.type.toLowerCase();if("submit"===e||"button"===e||"reset"===e)return!0}return!1}function p(a){for(var b,c=0;b=a.previousElementSibling;)b.tagName===a.tagName&&c++;return c}function q(a,b,c){for(var d,e=0,f=0;d=a.children[f];f++)if(d.nodeType===Node.ELEMENT_NODE&&d.tagName===b.tagName){if(e===c)return d;e++}return null}var r,s=a("../l20n"),t=a("./platform/io"),u=s.getContext(document.location.host),v=["ar","fa","he","ps","ur"],w=/^\/|:/,x={elements:["a","em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","ruby","rt","rp","bdi","bdo","span","br","wbr"],attributes:{global:["title","aria-label"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]}},y=!1;return b(),s}),c("l20n",function(a,b){"use strict";var c=a("./l20n/context").Context,d=a("./l20n/parser").Parser,e=a("./l20n/compiler").Compiler;b.Context=c,b.Parser=d,b.Compiler=e,b.getContext=function(a){return new c(a)}}),c("l20n/context",function(a,c){"use strict";function d(a,b){function c(a,c,i){function j(a,d){return a?c(a):(d&&(f.source=d),f.ast=b.parse(f.source),k(),void 0)}function k(){function g(a){return a?c(a):(k--,0===k&&l(),void 0)}var j=f.ast.body.filter(function(a,b){return"ImportStatement"===a.type?(h.push(b),!0):!1});j.forEach(function(a){var c=e(a.uri.content),g=new d(c,b);f.resources.push(g)});var k=f.resources.length;return 0===k?c():(f.resources.forEach(function(b){b.build(a+1,g,i)}),void 0)}function l(){for(var a=f.resources.length-1;a>=0;a--){var b=h[a]||0;Array.prototype.splice.apply(f.ast.body,[b,1].concat(f.resources[a].ast.body))}c()}return a>=7?c(new g("Too many nested imports.")):f.source?setTimeout(function(){j()}):(n.load(f.id,j,i),void 0)}function e(a){if(null===f.id||i.test(a))return a;var b=f.id.split("/").slice(0,-1).concat(a.split("/")).filter(function(a){return"."!==a});return b.join("/")}var f=this;this.id=a,this.resources=[],this.source=null,this.ast={type:"LOL",body:[]},this.build=c;var h=[],i=/^\/|:/}function e(a,c,d,e){function f(a){function b(a){a&&(k++,e.emit(a instanceof g?"error":"warning",a)),i--,0===i&&(k===j.resources.length&&e.emit("error",new g("Locale has no valid resources")),c())}function c(){j.ast.body=j.resources.reduce(function(a,b){return a.concat(b.ast.body)},j.ast.body),f()}function f(){j.entries=d.compile(j.ast),j.isReady=!0,a&&a()}if(!a)var h=!0;var i=j.resources.length;if(0===i)throw new g("Locale has no resources");var k=0;j.resources.forEach(function(a){a.build(0,b,h)})}function h(a){return this.entries.hasOwnProperty(a)?this.entries[a]:b}function i(a){return this.resources.some(function(b){return b.id===a})}this.id=a,this.resources=[],this.entries=null,this.ast={type:"LOL",body:[]},this.isReady=!1,this.build=f,this.getEntry=h,this.hasResource=i;var j=this}function f(c){function f(a,c){Object.keys(c).forEach(function(d){c[d]===b?delete a[d]:"object"!=typeof c[d]?a[d]=c[d]:("object"!=typeof a[d]&&(a[d]={}),f(a[d],c[d]))})}function n(a){if(!a||"object"!=typeof a)throw new g("Context data must be a non-null object");f(L,a)}function o(a,b){if(!S)throw new g("Context not ready");return u.call(Y,0,a,b).value}function p(a,b){if(!S)throw new g("Context not ready");return u.call(Y,0,a,b)}function q(a,b){if(!b)throw new g("No callback passed");return s.call(Y,a,b)}function r(a){S&&setTimeout(a),G("ready",a)}function s(a,b,c){var d={extend:function(c){for(var d=0;d<c.length;d++)-1===a.indexOf(c[d])&&a.push(c[d]);if(S){var e=t.call(this,c);return X.bindGet({id:b,callback:s.bind(this,a,b),globals:Object.keys(e.globalsUsed)},!0),e}}.bind(this),stop:function(){X.unbindGet(b)}.bind(this)};if(!S)return X.bindGet({id:b,callback:s.bind(this,a,b),globals:[]}),d;var e=t.call(this,a),f={entities:e.entities,reason:c||{locales:P.slice()},stop:function(){X.unbindGet(b)}};return X.bindGet({id:b,callback:s.bind(this,a,b),globals:Object.keys(e.globalsUsed)}),b(f),d}function t(a){for(var b,c={entities:{},globalsUsed:{}},d=0;b=a[d];d++){c.entities[b]=p.call(this,b);for(var e in c.entities[b].globals)c.entities[b].globals.hasOwnProperty(e)&&(c.globalsUsed[e]=!0)}return c}function u(a,c,d,e){var f=P[a];if(!f)return J(new h("Unable to get translation",c,P)),{value:e?e.source:c,attributes:{},globals:{},locale:e?e.loc:null};var g=C(f);g.isReady||g.build(null);var j=g.getEntry(c);if(j===b)return I(new i("Not found",c,P,g)),u.call(this,a+1,c,d,e);var k;try{k=j.get(v.call(this,d))}catch(m){if(m instanceof l.RuntimeError){if(J(new i(m.message,c,P,g)),m instanceof l.ValueError){var n=e||{source:m.source,loc:g.id};return u.call(this,a+1,c,d,n)}return u.call(this,a+1,c,d,e)}throw J(m)}return k.locale=g.id,k}function v(a){if(!a)return L;var b={};return f(b,L),f(b,a),b}function w(a){if(T)throw new g("Context is frozen");R.push(["text",a])}function x(a,b){var c=new d(null,V);c.source=a,b.resources.push(c)}function y(a){if(T)throw new g("Context is frozen");R.push(["function"==typeof a?"template":"uri",a])}function z(a,b){if(!b.hasResource(a)){var c=new d(a,V);b.resources.push(c)}}function A(a,c){if(T)throw new g("Context is frozen");a!==b&&(M=a,N=[],c||(c=[]),c.push(a),c.forEach(function(a){if("string"!=typeof a)throw new g("Language codes must be strings");-1===N.indexOf(a)&&N.push(a)}))}function B(a){if(T)throw new g("Context is frozen");K=a}function C(a){if(Q[a])return Q[a];var b=new e(a,V,W,U);Q[a]=b;for(var c=0;c<R.length;c++){var d=R[c];"text"===d[0]?x(d[1],b):"uri"===d[0]?z(d[1],b):z(d[1](b.id),b)}return b}function D(){if(T&&!S)throw new g("Context not ready");if(0===R.length)return I(new g("Context has no resources; not freezing")),void 0;if(T=!0,O=Array.prototype.slice.call(arguments),O.length&&O.forEach(function(a){if("string"!=typeof a)throw new g("Language codes must be strings")}),!K){var b=a("./intl").Intl;K=b.prioritizeLocales}var c=K(N,O,M,E);c&&E(c)}function E(a){P=a;var b=C(P[0]);b.isReady?F():b.build(F)}function F(){S=!0,X.all(P.slice()),U.emit("ready")}function G(a,b){U.addEventListener(a,b)}function H(a,b){U.removeEventListener(a,b)}function I(a){return U.emit("warning",a),a}function J(a){return U.emit("error",a),a}this.id=c,this.registerLocales=A,this.registerLocaleNegotiator=B,this.requestLocales=D,this.addResource=w,this.linkResource=y,this.updateData=n,this.get=o,this.getEntity=p,this.localize=q,this.ready=r,this.addEventListener=G,this.removeEventListener=H,Object.defineProperty(this,"supportedLocales",{get:function(){return P.slice()},enumerable:!0});var K,L={},M="i-default",N=[M],O=[],P=[],Q={},R=[],S=!1,T=!1,U=new j,V=new k,W=new l,X=new m,Y=this;V.addEventListener("error",J),W.addEventListener("error",I),W.setGlobals(X.globals)}function g(a){this.name="ContextError",this.message=a}function h(a,b,c){g.call(this,a),this.name="RuntimeError",this.entity=b,this.supportedLocales=c.slice(),this.message=b+": "+a+"; tried "+c.join(", ")}function i(a,b,c,d){h.call(this,a,b,c),this.name="TranslationError",this.locale=d.id,this.message="["+this.locale+"] "+b+": "+a}var j=a("./events").EventEmitter,k=a("./parser").Parser,l=a("./compiler").Compiler,m=a("./retranslation").RetranslationManager;a("./platform/globals");var n=a("./platform/io");f.Error=g,f.RuntimeError=h,f.TranslationError=i,g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,h.prototype=Object.create(g.prototype),h.prototype.constructor=h,i.prototype=Object.create(h.prototype),i.prototype.constructor=i,c.Context=f}),c("l20n/events",function(a,b){"use strict";function c(){this._listeners={}}c.prototype.emit=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();if(!this._listeners[b])return!1;for(var c=this._listeners[b].slice(),d=0;d<c.length;d++)c[d].apply(this,a);return!0},c.prototype.addEventListener=function(a,b){return this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push(b),this},c.prototype.removeEventListener=function(a,b){var c=this._listeners[a],d=c.indexOf(b);return-1===d?this:(c.splice(d,1),this)},b.EventEmitter=c}),c("l20n/parser",function(a,c){"use strict";function d(a){function c(){X+=2;var a=X,b=W.indexOf("*/",a);if(-1===b)throw U("Comment without closing tag");return X=b+2,{type:"Comment",content:W.slice(a,b)}}function d(){for(var a,b,c,d=[];;){if(a=h("Attribute"),a.local="_"===a.key.name.charAt(0),d.push(a),b=l(),c=W.charAt(X),">"===c)break;if(!b)throw U('Expected ">"')}return d}function g(a){var b=o();if(m(),":"!==W.charAt(X))throw U('Expected ":"');return++X,m(),{type:a,key:b,value:k()}}function h(a){var b=o(),c=[];if("["===W.charAt(X)&&(++X,m(),c=T(A,"]")),m(),":"!==W.charAt(X))throw U('Expected ":"');return++X,m(),{type:a,key:b,value:k(),index:c}}function i(){++X,m();for(var a,b,c,d=[],e=!1;;){if(a=!1,"*"===W.charAt(X)){if(++X,e)throw U("Default item redefinition forbidden");a=!0,e=!0}if(b=g("HashItem"),b.default=a,d.push(b),m(),c=","===W.charAt(X),c&&(++X,m()),"}"===W.charAt(X)){++X;break}if(!c)throw U('Expected "}"')}return{type:"Hash",content:d}}function j(a){for(var b=a.length,c=X+b,d=W.indexOf(a,c);-1!==d&&92===W.charCodeAt(d-1)&&92!==W.charCodeAt(d-2);)d=W.indexOf(a,d+1);if(-1===d)throw U("Unclosed string literal");var e=W.slice(c,d);return X=d+b,{type:"String",content:e,maybeComplex:-1!==e.indexOf("{{")}}function k(a,c){if(c===b&&(c=W.charAt(X)),"'"===c||'"'===c)return c===W.charAt(X+1)&&c===W.charAt(X+2)?j(c+c+c):j(c);if("{"===c)return i();if(!a)throw U("Unknown value type");return null}function l(){for(var a=X,b=W.charCodeAt(a);32===b||10===b||9===b||13===b;)b=W.charCodeAt(++X);return X!==a}function m(){for(var a=W.charCodeAt(X);32===a||10===a||9===a||13===a;)a=W.charCodeAt(++X)}function n(){return++X,{type:"VariableExpression",id:o()}}function o(){var a=X,b=a,c=W,d=c.charCodeAt(b);if((97>d||d>122)&&(65>d||d>90)&&95!==d)throw U("Identifier has to start with [a-zA-Z_]");for(d=c.charCodeAt(++a);d>=97&&122>=d||d>=65&&90>=d||d>=48&&57>=d||95===d;)d=c.charCodeAt(++a);return X=a,{type:"Identifier",name:c.slice(b,a)}}function p(){if(X+=6,"("!==W.charAt(X))throw U('Expected "("');++X,m();var a=j(W.charAt(X));if(m(),")"!==W.charAt(X))throw U('Expected ")"');return++X,{type:"ImportStatement",uri:a}}function q(a){if("_"===a.name.charAt(0))throw U('Macro ID cannot start with "_"');++X;var b=T(n,")");if(l(),"{"!==W.charAt(X))throw U('Expected "{"');++X,m();var c=A();if(m(),"}"!==W.charAt(X))throw U('Expected "}"');if(++X,m(),62!==W.charCodeAt(X))throw U('Expected ">"');return++X,{type:"Macro",id:a,args:b,expression:c}}function r(a,b){if(!l())throw U("Expected white space");var c=W.charAt(X),e=k(!0,c),f=[];if(null===e){if(">"===c)throw U('Expected ">"');f=d()}else{var g=l();if(">"!==W.charAt(X)){if(!g)throw U('Expected ">"');f=d()}}return++X,{type:"Entity",id:a,value:e,index:b,attrs:f,local:95===a.name.charCodeAt(0)}}function s(){var a=W.charCodeAt(X);if(60===a){++X;var b=o();return a=W.charCodeAt(X),40===a?q(b):91===a?(++X,r(b,T(A,"]"))):r(b,[])}if(47===W.charCodeAt(X)&&42===W.charCodeAt(X+1))return c();if("import"===W.slice(X,X+6))return p();throw U("Invalid entry")}function t(){for(var a,b,c=X,d=!1,e=0,f=W.indexOf("\\");-1!==f;)a=W.charAt(f+1),('"'===a||"'"===a||"\\"===a)&&(W=W.substr(0,f)+W.substr(f+1)),f=W.indexOf("\\",f+1);for(f=W.indexOf("{{");-1!==f;)if(92!==W.charCodeAt(f-1)){if(d||(b=[],d=!0),e>_-1)throw U("Too many placeables, maximum allowed is "+_);if(f>c&&b.push({type:"String",content:W.slice(c,f)}),X=f+2,m(),b.push(A()),m(),125!==W.charCodeAt(X)||125!==W.charCodeAt(X+1))throw U('Expected "}}"');e++,f=X+2,c=f,f=W.indexOf("{{",f)}else W=W.substr(0,f-1)+W.substr(f),f=W.indexOf("{{",f+2);return d?(Y>c&&b.push({type:"String",content:W.slice(c)}),{type:"ComplexString",content:b}):{type:"String",content:W}}function u(){var a=[];for(m();Y>X;){try{a.push(s())}catch(b){if(!(b instanceof e))throw b;Z.emit("error",b),a.push(V())}Y>X&&m()}return{type:"LOL",body:a}}function v(){var a=[];for(m();Y>X;)a.push(s()),Y>X&&m();return{type:"LOL",body:a}}function w(a){W=a,X=0,Y=W.length;try{return t()}catch(b){throw Z&&b instanceof e&&Z.emit("error",b),b}}function x(a){return W=a,X=0,Y=W.length,$()}function y(a,b){if(!Z)throw new Error("Emitter not available");return Z.addEventListener(a,b)}function z(a,b){if(!Z)throw new Error("Emitter not available");return Z.removeEventListener(a,b)}function A(){return D()}function B(a,b,c,d){for(var e,f,g=d();;){if(e="",m(),f=W.charAt(X),-1===a[0].indexOf(f))break;if(e+=f,++X,a.length>1)if(f=W.charAt(X),a[1]===f)++X,e+=f;else if(a[2])return--X,g;m(),g={type:b,operator:{type:c,token:e},left:g,right:d()}}return g}function C(a,b,c,d){var e=W.charCodeAt(X);return-1===a.indexOf(e)?d():(++X,m(),{type:b,operator:{type:c,token:String.fromCharCode(e)},argument:C(a,b,c,d)})}function D(){var a=E();if(m(),63!==W.charCodeAt(X))return a;++X,m();var b=A();if(m(),58!==W.charCodeAt(X))throw U('Expected ":"');return++X,m(),{type:"ConditionalExpression",test:a,consequent:b,alternate:A()}}function E(){return B([["|"],"|",!0],"LogicalExpression","LogicalOperator",F)}function F(){return B([["&"],"&",!0],"LogicalExpression","Logicalperator",G)}function G(){return B([["=","!"],"=",!0],"BinaryExpression","BinaryOperator",H)}function H(){return B([["<",">"],"=",!1],"BinaryExpression","BinaryOperator",I)}function I(){return B([["+","-"]],"BinaryExpression","BinaryOperator",J)}function J(){return B([["%"]],"BinaryExpression","BinaryOperator",K)}function K(){return B([["*"]],"BinaryExpression","BinaryOperator",L)}function L(){return B([["/"]],"BinaryExpression","BinaryOperator",M)}function M(){return C([43,45,33],"UnaryExpression","UnaryOperator",Q)}function N(a){return m(),{type:"CallExpression",callee:a,arguments:T(A,")")}}function O(a,b){if("ParenthesisExpression"!==a.type&&"Identifier"!==a.type&&"ThisExpression"!==a.type)throw U("AttributeExpression must have Identifier, This or Parenthesis as left node");var c;if(b){if(m(),c=A(),m(),"]"!==W.charAt(X))throw U('Expected "]"');return++X,{type:"AttributeExpression",expression:a,attribute:c,computed:!0}}return c=o(),{type:"AttributeExpression",expression:a,attribute:c,computed:!1}}function P(a,b){var c;if(b){if(m(),c=A(),m(),"]"!==W.charAt(X))throw U('Expected "]"');return++X,{type:"PropertyExpression",expression:a,property:c,computed:!0}}return c=o(),{type:"PropertyExpression",expression:a,property:c,computed:!1}}function Q(){for(var a,b=R();;)if(a=W.charCodeAt(X),46===a||91===a)++X,b=P(b,91===a);else if(58===a&&58===W.charCodeAt(X+1))X+=2,91===W.charCodeAt(X)?(++X,b=O(b,!0)):b=O(b,!1);else{if(40!==a)break;++X,b=N(b)}return b}function R(){if(40===W.charCodeAt(X)){++X,m();var a={type:"ParenthesisExpression",expression:A()};if(m(),41!==W.charCodeAt(X))throw U('Expected ")"');return++X,a}return S()}function S(){for(var a=X,b=W.charCodeAt(a);b>47&&58>b;)b=W.charCodeAt(++a);if(a>X){var c=X;return X=a,{type:"Number",value:parseInt(W.slice(c,a),10)}}switch(b){case 39:case 34:case 123:case 91:return k();case 36:return n();case 64:return++X,{type:"GlobalsExpression",id:o()};case 126:return++X,{type:"ThisExpression"};default:return o()}}function T(a,b){var c;if(m(),W.charAt(X)===b)return++X,[];for(var d=[];;){if(d.push(a()),m(),c=W.charAt(X),","!==c){if(c===b){++X;break}throw U('Expected "," or "'+b+'"')}++X,m()}return d}function U(a,c){c===b&&(c=X);var d=W.lastIndexOf("<",c-1),f=W.lastIndexOf(">",c-1);d=f>d?f+1:d;var g=W.slice(d,c+10),h=a+" at pos "+c+': "'+g+'"';return new e(h,c,g)}function V(){var a,b=W.indexOf("<",X);return-1===b?(a={type:"JunkEntry",content:W.slice(X)},X=Y,a):(a={type:"JunkEntry",content:W.slice(X,b)},X=b,a)}this.parse=x,this.parseString=w,this.addEventListener=y,this.removeEventListener=z;var W,X,Y,Z,$,_=100;a?$=v:(Z=new f,$=u)}function e(a,b,c){this.name="ParserError",this.message=a,this.pos=b,this.context=c}var f=a("./events").EventEmitter;d.Error=e,e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,c.Parser=d}),c("l20n/compiler",function(a,c){function d(){function a(a,b){b||(b={});for(var c,d=0;c=a.body[d];d++){var e=R[c.type];if(e)try{b[c.id.name]=new e(c,b)}catch(f){j(f)}}return b}function c(a){return P=a,!0}function d(a,b){return N.addEventListener(a,b)}function e(a,b){return N.removeEventListener(a,b)}function m(a,b,c,d){var e=new a(b,c,d);return N.emit("error",e),e}function n(a,b){this.id=a.id.name,this.env=b,this.local=a.local||!1,this.index=[],this.attributes={},this.publicAttributes=[];var c;for(c=0;c<a.index.length;c++)this.index.push(z(a.index[c],this));for(c=0;c<a.attrs.length;c++){var d=a.attrs[c];this.attributes[d.key.name]=new o(d,this),d.local||this.publicAttributes.push(d.key.name)}this.value=a.value&&a.value.maybeComplex===!1?a.value.content:q(a.value,this,this.index)}function o(a,b){this.key=a.key.name,this.local=a.local||!1,this.index=[];for(var c=0;c<a.index.length;c++)this.index.push(z(a.index[c],this));this.value=a.value&&a.value.maybeComplex===!1?a.value.content:q(a.value,b,this.index),this.entity=b}function p(a,b){this.id=a.id.name,this.env=b,this.local=a.local||!1,this.expression=q(a.expression,this),this.args=a.args}function q(a,b,c){if(!a)return null;if(!S[a.type])throw m("CompilationError","Unknown expression type"+a.type);return c&&(c=c.slice()),S[a.type](a,b,c)}function r(a,c,d){if("string"==typeof a||"boolean"==typeof a||"number"==typeof a||!a)return a;if(a.value!==b)return r(a.value,c,d);if("function"==typeof a){var e=a(c,d);return c=e[0],e=e[1],r(e,c,d)}if(a.expression)throw new g("Uncalled macro: "+a.id);throw new g("Cannot resolve ctxdata or global of type "+typeof a)}function s(a){var b=a.name;return function(a){if(!a.__env__.hasOwnProperty(b))throw new g("Reference to an unknown entry: "+b);return a={__this__:a.__env__[b],__env__:a.__env__},[a,a.__this__]}}function t(){return function(a){return[a,a.__this__]}}function u(a){var b=a.id.name;return function(a,c){if(a.hasOwnProperty(b))return a[b];if(!c||!c.hasOwnProperty(b))throw new g("Reference to an unknown variable: "+b);return[a,c[b]]}}function v(a){var b=a.id.name;return function(a){if(!P)throw new g("No globals set (tried @"+b+")");if(!P.hasOwnProperty(b))throw new g("Reference to an unknown global: "+b);var c;try{c=P[b].get()}catch(d){throw new g("Cannot evaluate global "+b)}return Q.globals[b]=!0,[a,c]}}function w(a){return function(b){return[b,a.value]}}function x(a,b){var c;return function(d,e,f){if(arguments.length>2)throw new g("Cannot get property of a string: "+f);if(!a.maybeComplex)return[d,a.content];var i;if(!c){try{i=O.parseString(a.content)}catch(k){throw new h("Malformed string. "+k.message,b,a.content)}if("String"===i.type)return[d,i.content];c=q(i,b)}try{return[d,r(c,d,e)]}catch(k){throw j(k),new h(k.message,b,a.content)}}}function y(a,b){for(var c=[],d=0;d<a.content.length;d++)c.push(q(a.content[d],b));return function(){var a=!1;return function(b,d){if(a)throw new g("Cyclic reference detected");a=!0;var e=[];try{for(var f=0;f<c.length;f++){var h=r(c[f],b,d);if("string"!=typeof h&&"number"!=typeof h)throw new g("Placeables must be strings or numbers");if(h.length>M)throw new g("Placeable has too many characters, maximum allowed is "+M);e.push(h)}}finally{a=!1}return[b,e.join("")]}}()}function z(a,b){var c=q(a,b);return function(){var a=!1;return function(d,e){if(a)throw new g("Cyclic reference detected");a=!0;var f;try{f=r(c,d,e)}catch(h){if(h instanceof i)throw h;throw j(h),m(i,h.message,b)}finally{a=!1}return[d,f]}}()}function A(a,c,d){for(var e,f={},g=d.length?d.shift():b,h=0;h<a.content.length;h++){var j=a.content[h];f[j.key.name]=q(j.value,c,d),j.default&&(e=j.key.name)}return function(a,d,h){for(var j=[h,g,e],k=[],l=0;l<j.length;l++){var n=r(j[l],a,d);if(n!==b){if("string"!=typeof n)throw m(i,"Index must be a string",c);if(k.push(n),f.hasOwnProperty(n))return[a,f[n]]}}var o;throw o=k.length?'Hash key lookup failed (tried "'+k.join('", "')+'").':"Hash key lookup failed.",m(i,o,c)}}function B(a,b){if("-"===a)return function(a){if("number"!=typeof a)throw new g("The unary - operator takes a number");return-a};if("+"===a)return function(a){if("number"!=typeof a)throw new g("The unary + operator takes a number");return+a};if("!"===a)return function(a){if("boolean"!=typeof a)throw new g("The ! operator takes a boolean");return!a};throw m(f,"Unknown token: "+a,b)}function C(a,b){if("=="===a)return function(a,b){if(!("number"==typeof a&&"number"==typeof b||"string"==typeof a&&"string"==typeof b))throw new g("The == operator takes two numbers or two strings");return a===b};if("!="===a)return function(a,b){if(!("number"==typeof a&&"number"==typeof b||"string"==typeof a&&"string"==typeof b))throw new g("The != operator takes two numbers or two strings");return a!==b};if("<"===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The < operator takes two numbers");return b>a};if("<="===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The <= operator takes two numbers");return b>=a};if(">"===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The > operator takes two numbers");return a>b};if(">="===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The >= operator takes two numbers");return a>=b};if("+"===a)return function(a,b){if(!("number"==typeof a&&"number"==typeof b||"string"==typeof a&&"string"==typeof b))throw new g("The + operator takes two numbers or two strings");return a+b};if("-"===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The - operator takes two numbers");return a-b};if("*"===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The * operator takes two numbers");return a*b};if("/"===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The / operator takes two numbers");if(0===b)throw new g("Division by zero not allowed.");return a/b};if("%"===a)return function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new g("The % operator takes two numbers");if(0===b)throw new g("Modulo zero not allowed.");return a%b};throw m(f,"Unknown token: "+a,b)}function D(a,b){if("&&"===a)return function(a,b){if("boolean"!=typeof a||"boolean"!=typeof b)throw new g("The && operator takes two booleans");return a&&b};if("||"===a)return function(a,b){if("boolean"!=typeof a||"boolean"!=typeof b)throw new g("The || operator takes two booleans");return a||b};throw m(f,"Unknown token: "+a,b)}function E(a,b){var c=B(a.operator.token,b),d=q(a.argument,b);return function(a,b){return[a,c(r(d,a,b))]}}function F(a,b){var c=q(a.left,b),d=C(a.operator.token,b),e=q(a.right,b);return function(a,b){return[a,d(r(c,a,b),r(e,a,b))]}}function G(a,b){var c=q(a.left,b),d=D(a.operator.token,b),e=q(a.right,b);return function(a,b){return[a,d(r(c,a,b),r(e,a,b))]}}function H(a,b){var c=q(a.test,b),d=q(a.consequent,b),e=q(a.alternate,b);return function(a,b){var f=r(c,a,b);if("boolean"!=typeof f)throw new g("Conditional expressions must test a boolean");return f===!0?d(a,b):e(a,b)}}function I(a,b){for(var c=q(a.callee,b),d=[],e=0;e<a.arguments.length;e++)d.push(q(a.arguments[e],b));return function(a,b){for(var e=[],f=0;f<d.length;f++)e.push(d[f](a,b));var h=c(a,b);if(a=h[0],h=h[1],!h.expression)throw new g("Expected a macro, got a non-callable.");return h._call(e,b)}}function J(a,c){var d=q(a.expression,c),e=a.computed?q(a.property,c):a.property.name;return function(a,c){var f=r(e,a,c),h=d(a,c);if(a=h[0],h=h[1],h&&h.value!==b){if("function"!=typeof h.value)throw new g("Cannot get property of a "+typeof h.value+": "+f);return h.value(a,c,f)}if("function"==typeof h)return h(a,c,f);if(h&&h.expression)throw new g("Cannot get property of a macro: "+f);if("object"==typeof h){if(null===h)throw new g("Cannot get property of a null: "+f);if(Array.isArray(h))throw new g("Cannot get property of an array: "+f);if(!h.hasOwnProperty(f))throw new g(f+" is not defined on the object.");return[a,h[f]]}throw new g("Cannot get property of a "+typeof h+": "+f)}}function K(a,b){var c=q(a.expression,b),d=a.computed?q(a.attribute,b):a.attribute.name;return function(a,b){var e=r(d,a,b),f=c(a,b);if(a=f[0],f=f[1],!f.attributes)throw new g("Cannot get attribute of a non-entity: "+e);if(!f.attributes.hasOwnProperty(e))throw new g(f.id+" has no attribute "+e);return[a,f.attributes[e]]}}function L(a,b){return q(a.expression,b)}this.compile=a,this.setGlobals=c,this.addEventListener=d,this.removeEventListener=e;var M=2500,N=new k,O=new l(!0),P=null,Q={globals:{}},R={Entity:n,Macro:p};n.prototype.getString=function(a){try{var b={__this__:this,__env__:this.env};return r(this.value,b,a)}catch(c){throw j(c),c instanceof h&&N.emit("error",c),c}},n.prototype.get=function(a){Q.globals={};for(var b,c={value:this.getString(a),attributes:{}},d=0;b=this.publicAttributes[d];d++)c.attributes[b]=this.attributes[b].getString(a);return c.globals=Q.globals,c},o.prototype.getString=function(a){try{var b={__this__:this.entity,__env__:this.entity.env};return r(this.value,b,a)}catch(c){throw j(c),c instanceof h&&N.emit("error",c),c}},p.prototype._call=function(a,b){var c={__this__:this,__env__:this.env};if(this.args.length!==a.length)throw new g(this.id+"() takes exactly "+this.args.length+" argument(s) ("+a.length+" given)");for(var d=0;d<this.args.length;d++)c[this.args[d].id.name]=a[d];var e=this.expression(c,b);return c=e[0],e=e[1],[c,r(e,c,b)]};var S={Identifier:s,ThisExpression:t,VariableExpression:u,GlobalsExpression:v,Number:w,String:x,Hash:A,HashItem:q,ComplexString:y,UnaryExpression:E,BinaryExpression:F,LogicalExpression:G,ConditionalExpression:H,CallExpression:I,PropertyExpression:J,AttributeExpression:K,ParenthesisExpression:L}}function e(a){this.name="CompilerError",this.message=a}function f(a,b){e.call(this,a),this.name="CompilationError",this.entry=b.id}function g(a){e.call(this,a),this.name="RuntimeError"}function h(a,b,c){g.call(this,a),this.name="ValueError",this.entry=b.id,this.source=c}function i(a,b){g.call(this,a),this.name="IndexError",this.entry=b.id}function j(a){if(!(a instanceof e))throw a}var k=a("./events").EventEmitter,l=a("./parser").Parser;d.Error=e,d.CompilationError=f,d.RuntimeError=g,d.ValueError=h,d.IndexError=i,e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,f.prototype=Object.create(e.prototype),f.prototype.constructor=f,g.prototype=Object.create(e.prototype),g.prototype.constructor=g,h.prototype=Object.create(g.prototype),h.prototype.constructor=h,i.prototype=Object.create(g.prototype),i.prototype.constructor=i,c.Compiler=d}),c("l20n/retranslation",function(a,b){"use strict";function c(){function a(a){var b=new a;this.globals[b.id]=b,b.activate&&(g[b.id]=0,b.addEventListener("change",function(a){for(var c=0;c<f.length;c++)f[c]&&-1!==f[c].globals.indexOf(a)&&f[c].callback({global:b.id})}))}function b(a,b){var c,d;for(c=0;c<h.length;c++)if(h[c].id===a.id){d=!0;break}d?b&&(h[c]=a):h.push(a);var e;for(c=0;c<f.length;c++)if(f[c]&&f[c].id===a.id){e=f[c];break}var i;if(e)if(b)e.callback=a.callback,i=a.globals.filter(function(a){return this.globals[a].activate&&-1===e.globals.indexOf(a)},this),i.forEach(function(a){g[a]++,this.globals[a].activate()},this),e.globals=e.globals.concat(i);else if(0===a.globals.length)delete f[c];else{i=a.globals.filter(function(a){return this.globals[a].activate&&-1===e.globals.indexOf(a)
},this),i.forEach(function(a){g[a]++,this.globals[a].activate()},this);var j=e.globals.filter(function(b){return this.globals[b].activate&&-1===a.globals.indexOf(b)},this);j.forEach(function(a){g[a]--,0===g[a]&&this.globals[a].deactivate()},this),e.globals=a.globals}else 0!==a.globals.length&&(f.push(a),a.globals.forEach(function(a){this.globals[a].activate&&(g[a]++,this.globals[a].activate())},this))}function d(a){for(var b,c=-1,d=0;d<f.length;d++)if(f[d]&&f[d].id===a){b=f[d],c=d;break}if(b)for(b.globals.forEach(function(a){this.globals[a].activate&&(g[a]--,0===g[a]&&this.globals[a].deactivate())},this),f.splice(c,1),d=0;d<h.length;d++)if(h[d].id===a){h.splice(d,1);break}}function e(a){for(var b=0;b<h.length;b++)h[b].callback({locales:a})}var f=[],g={},h=[];this.bindGet=b,this.unbindGet=d,this.all=e,this.globals={},c._constructors.forEach(function(b){a.call(this,b)},this)}c._constructors=[],c.registerGlobal=function(a){c._constructors.push(a)},c.deregisterGlobal=function(a){var b=c._constructors.indexOf(a);-1!==b&&c._constructors.splice(b,1)},b.RetranslationManager=c}),c("l20n/platform/globals",function(b,c){"use strict";function d(){this.id=null,this._emitter=new h,this.value=null,this.isActive=!1}function e(){function b(){return{width:{px:document.body.clientWidth}}}function c(){e.value=b(),e._emitter.emit("change",e.id)}d.call(this),this.id="screen",this._get=b,this.activate=function(){this.isActive||(a.addEventListener("resize",c),this.isActive=!0)},this.deactivate=function(){a.removeEventListener("resize",c),this.value=null,this.isActive=!1};var e=this}function f(){function a(){return/^MacIntel/.test(navigator.platform)?"mac":/^Linux/.test(navigator.platform)?"linux":/^Win/.test(navigator.platform)?"win":"unknown"}d.call(this),this.id="os",this.get=a}function g(){function a(){var a=new Date;return a.getHours()}function b(){var a=new Date;a.getHours()!==c.value&&(c.value=a.getHours(),c._emitter.emit("change",c.id))}d.call(this),this.id="hour",this._get=a,this.activate=function(){if(!this.isActive){var a=new Date;f=setTimeout(function(){b(),f=setInterval(b,e)},e-a.getTime()%e),this.isActive=!0}},this.deactivate=function(){clearInterval(f),this.value=null,this.isActive=!1};var c=this,e=36e5,f=null}var h=b("../events").EventEmitter,i=b("../retranslation").RetranslationManager;d.prototype._get=function(){throw new Error("Not implemented")},d.prototype.get=function(){return this.value&&this.isActive||(this.value=this._get()),this.value},d.prototype.addEventListener=function(a,b){if("change"!==a)throw"Unknown event type";this._emitter.addEventListener(a,b)},e.prototype=Object.create(d.prototype),e.prototype.constructor=e,f.prototype=Object.create(d.prototype),f.prototype.constructor=f,g.prototype=Object.create(d.prototype),g.prototype.constructor=g,i.registerGlobal(e),i.registerGlobal(f),i.registerGlobal(g),c.Global=d}),c("l20n/platform/io",function(a,b){"use strict";function c(a){this.name="IOError",this.message=a}b.load=function(a,b,d){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("text/plain"),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status||0===e.status)b(null,e.responseText);else{var d=new c("Not found: "+a);b(d)}},e.open("GET",a,!d),e.send("")},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,b.Error=c}),c("l20n/intl",function(a,c){"use strict";function d(a){if(!o.test(a))return!1;if(a.startsWith("x-"))return!0;var b=a.indexOf("-x-");return-1!==b&&(a=a.substring(0,b)),!p.test(a)&&!q.test(a)}function e(a){if(a=a.toLowerCase(),l&&l.hasOwnProperty(a))return l[a];for(var b=a.split("-"),c=0;c<b.length;){var d=b[c];if(1===d.length&&(c>0||"x"===d))break;4===d.length?d=d[0].toUpperCase()+d.substring(1):0!==c&&2===d.length&&(d=d.toUpperCase()),m.hasOwnProperty(d)?d=m[d]:n.hasOwnProperty(d)&&(d=n[d].preferred,1===c&&n[d].prefix===b[0]&&(b.shift(),c--)),b[c]=d,c++}for(var e=b.slice(0,c).join("-"),f=[];c<b.length&&"x"!==b[c];){var g=c;for(c++;c<b.length&&b[c].length>1;)c++;var h=sybtags.slice(g,c).join("-");f.push(h)}f.sort();var i="";c<b.length&&(i=b.slice(c).join("-"));var j=e;return f.length>0&&(j+="-"+f.join("-")),i.length>0&&(j.length>0?j+="-"+i:j=i),j}function f(a){if(a===b)return[];var c=[];"string"==typeof a&&(a=[a]);for(var f=a,g=f.length,h=0;g>h;){var i=h in f;if(i){var j=f[h];"string"!=typeof j&&"object"!=typeof j&&ThrowError(JSMSG_INVALID_LOCALES_ELEMENT);var k=j;d(k)||ThrowError(JSMSG_INVALID_LANGUAGE_TAG,k),k=e(k),-1===c.indexOf(k)&&c.push(k)}h++}return c}function g(a,c){for(var d=c;;){if(-1!==a.indexOf(d))return d;var e=d.lastIndexOf("-");if(-1===e)return b;e>=2&&"-"===d[e-2]&&(e-=2),d=d.substring(0,e)}}function h(a,c){for(var d=c.length,e=[],f=0;d>f;){var h=c[f],i=h.replace(k,""),j=g(a,i);j!==b&&e.push(j),f++}return e.slice(0)}function i(a,b,c){a=f(a),b=f(b);var d=h(a,b);return c?(c=e(c),-1===d.indexOf(c)&&d.push(c),d):d}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(a,b){return b=b||0,this.indexOf(a,b)===b}});var j="-u(-[a-z0-9]{2,8})+";new RegExp(j);var k=new RegExp(j,"g"),l={},m={},n={},o=function(){var a="[a-zA-Z]",b="[0-9]",c="(?:"+a+"|"+b+")",d="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)",e="(?:en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)",f="(?:"+e+"|"+d+")",g="(?:x(?:-[a-z0-9]{1,8})+)",h="(?:"+b+"|[A-WY-Za-wy-z])",i="(?:"+h+"(?:-"+c+"{2,8})+)",j="(?:"+c+"{5,8}|(?:"+b+c+"{3}))",k="(?:"+a+"{2}|"+b+"{3})",l="(?:"+a+"{4})",m="(?:"+a+"{3}(?:-"+a+"{3}){0,2})",n="(?:"+a+"{2,3}(?:-"+m+")?|"+a+"{4}|"+a+"{5,8})",o=n+"(?:-"+l+")?(?:-"+k+")?(?:-"+j+")*(?:-"+i+")*(?:-"+g+")?",p="^(?:"+o+"|"+g+"|"+f+")$";return new RegExp(p,"i")}(),p=function(){var a="[a-zA-Z]",b="[0-9]",c="(?:"+a+"|"+b+")",d="(?:"+c+"{5,8}|(?:"+b+c+"{3}))",e="(?:"+c+"{2,8}-)+"+"("+d+")-"+"(?:"+c+"{2,8}-)*"+"\\1"+"(?!"+c+")";return new RegExp(e)}(),q=function(){var a="[a-zA-Z]",b="[0-9]",c="(?:"+a+"|"+b+")",d="(?:"+b+"|[A-WY-Za-wy-z])",e="-("+d+")-"+"(?:"+c+"+-)*"+"\\1"+"(?!"+c+")";return new RegExp(e)}();c.Intl={prioritizeLocales:i}}),a.L20n=h("l20n"),h("l20n/gaia")}(window);